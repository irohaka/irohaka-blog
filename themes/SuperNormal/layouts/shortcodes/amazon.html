{{- $key := .Get "key" -}}
{{- $tag := .Site.Params.amazonJpAffiliate | default "" -}}
{{- $book := index $.Site.Data.ama $key -}}

{{- if $book }}
 {{- $title := $book.title -}}
 {{- $asin := $book.asin -}}
 {{- $publisher := $book.publisher -}}
 {{- $publishdate := $book.publishdate -}}

 <div class="amazonlink" style="display:flex; gap:1rem; margin:1rem 0; align-items:flex-start;">
   <div class="amazontitle">
   <a href="https://www.amazon.co.jp/dp/{{ $asin }}/?tag={{ $tag }}" target="_blank" rel="noopener">
   <strong>{{ $title }}</strong>
   </a><br>
   <small>{{ $publisher }}</small><br>
   <small>{{ $publishdate }}</small><br>
   <a class="buy-amazon" href="https://www.amazon.co.jp/dp/{{ $asin }}/?tag={{ $tag }}" target="_blank" rel="noopener"
style="display:inline-block; margin-top:0.5rem; background:#f3a847; color:white; padding:4px 8px; border-radius:4px; text-decoration:none;">
 Amazonで見る </a>
 </div>
 </div>
{{- else }}
 <p style="color:red;">❌ 指定された key="{{ $key }}" のデータが見つかりません。</p>
{{- end }}